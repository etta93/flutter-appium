"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("source-map-support/register");

var _asyncbox = require("asyncbox");

var _support = require("@appium/support");

var _logger = _interopRequireDefault(require("../logger"));

var _lodash = _interopRequireDefault(require("lodash"));

var _bluebird = _interopRequireDefault(require("bluebird"));

var _baseDriver = require("@appium/base-driver");

var _cookies = _interopRequireDefault(require("../cookies"));

var _events = require("events");

const IPHONE_TOP_BAR_HEIGHT = 71;
const IPHONE_SCROLLED_TOP_BAR_HEIGHT = 41;
const IPHONE_X_SCROLLED_OFFSET = 55;
const IPHONE_X_NOTCH_OFFSET_IOS = 24;
const IPHONE_X_NOTCH_OFFSET_IOS_13 = 20;
const IPHONE_LANDSCAPE_TOP_BAR_HEIGHT = 51;
const IPHONE_BOTTOM_BAR_OFFSET = 49;
const TAB_BAR_OFFSET = 33;
const IPHONE_WEB_COORD_SMART_APP_BANNER_OFFSET = 84;
const IPAD_WEB_COORD_SMART_APP_BANNER_OFFSET = 95;
const NOTCHED_DEVICE_SIZES = [{
  w: 1125,
  h: 2436
}, {
  w: 828,
  h: 1792
}, {
  w: 1242,
  h: 2688
}];
const {
  W3C_WEB_ELEMENT_IDENTIFIER
} = _support.util;
const ATOM_WAIT_TIMEOUT_MS = 2 * 60000;
const ATOM_INITIAL_WAIT_MS = 1000;
const ON_OBSTRUCTING_ALERT_EVENT = 'alert';
const VISIBLE = 'visible';
const INVISIBLE = 'invisible';
const DETECT = 'detect';
const VISIBILITIES = [VISIBLE, INVISIBLE, DETECT];
const TAB_BAR_POSITION_TOP = 'top';
const TAB_BAR_POSITION_BOTTOM = 'bottom';
const TAB_BAR_POSSITIONS = [TAB_BAR_POSITION_TOP, TAB_BAR_POSITION_BOTTOM];
const commands = {},
      helpers = {},
      extensions = {};

function isValidElementIdentifier(id) {
  if (!_lodash.default.isString(id) && !_lodash.default.isNumber(id)) {
    return false;
  }

  if (_lodash.default.isString(id) && _lodash.default.isEmpty(id)) {
    return false;
  }

  if (_lodash.default.isNumber(id) && isNaN(id)) {
    return false;
  }

  return true;
}

commands.setFrame = async function setFrame(frame) {
  if (!this.isWebContext()) {
    throw new _baseDriver.errors.NotImplementedError();
  }

  if (_lodash.default.isNull(frame)) {
    this.curWebFrames = [];

    _logger.default.debug('Leaving web frame and going back to default content');

    return;
  }

  if (helpers.hasElementId(frame)) {
    const atomsElement = this.getAtomsElement(frame);
    const value = await this.executeAtom('get_frame_window', [atomsElement]);

    _logger.default.debug(`Entering new web frame: '${value.WINDOW}'`);

    this.curWebFrames.unshift(value.WINDOW);
  } else {
    const atom = _lodash.default.isNumber(frame) ? 'frame_by_index' : 'frame_by_id_or_name';
    const value = await this.executeAtom(atom, [frame]);

    if (_lodash.default.isNull(value) || _lodash.default.isUndefined(value.WINDOW)) {
      throw new _baseDriver.errors.NoSuchFrameError();
    }

    _logger.default.debug(`Entering new web frame: '${value.WINDOW}'`);

    this.curWebFrames.unshift(value.WINDOW);
  }
};

commands.getCssProperty = async function getCssProperty(propertyName, el) {
  if (!this.isWebContext()) {
    throw new _baseDriver.errors.NotImplementedError();
  }

  const atomsElement = this.getAtomsElement(el);
  return await this.executeAtom('get_value_of_css_property', [atomsElement, propertyName]);
};

commands.submit = async function submit(el) {
  if (!this.isWebContext()) {
    throw new _baseDriver.errors.NotImplementedError();
  }

  const atomsElement = this.getAtomsElement(el);
  await this.executeAtom('submit', [atomsElement]);
};

commands.refresh = async function refresh() {
  if (!this.isWebContext()) {
    throw new _baseDriver.errors.NotImplementedError();
  }

  await this.executeAtom('refresh', []);
};

commands.getUrl = async function getUrl() {
  if (!this.isWebContext()) {
    throw new _baseDriver.errors.NotImplementedError();
  }

  return await this.remote.execute('window.location.href');
};

commands.title = async function title() {
  if (!this.isWebContext()) {
    throw new _baseDriver.errors.NotImplementedError();
  }

  return await this.executeAtom('title', [], true);
};

commands.getCookies = async function getCookies() {
  if (!this.isWebContext()) {
    throw new _baseDriver.errors.NotImplementedError();
  }

  _logger.default.debug('Retrieving all cookies');

  let script = 'return document.cookie';
  let jsCookies = await this.executeAtom('execute_script', [script, []]);
  let cookies = [];

  try {
    for (let [name, value] of _lodash.default.toPairs(_cookies.default.createJWPCookie(undefined, jsCookies))) {
      cookies.push({
        name,
        value
      });
    }

    return cookies;
  } catch (err) {
    _logger.default.error(err);

    throw new _baseDriver.errors.UnknownError(`Error parsing cookies from result: '${jsCookies}'`);
  }
};

commands.setCookie = async function setCookie(cookie) {
  if (!this.isWebContext()) {
    throw new _baseDriver.errors.NotImplementedError();
  }

  cookie = _lodash.default.clone(cookie);

  if (!cookie.path) {
    cookie.path = '/';
  }

  const jsCookie = _cookies.default.createJSCookie(cookie.name, cookie.value, {
    expires: _lodash.default.isNumber(cookie.expiry) ? new Date(cookie.expiry * 1000).toUTCString() : cookie.expiry,
    path: cookie.path,
    domain: cookie.domain,
    httpOnly: cookie.httpOnly,
    secure: cookie.secure
  });

  let script = `document.cookie = ${JSON.stringify(jsCookie)}`;
  await this.executeAtom('execute_script', [script, []]);
};

commands.deleteCookie = async function deleteCookie(cookieName) {
  if (!this.isWebContext()) {
    throw new _baseDriver.errors.NotImplementedError();
  }

  let cookies = await this.getCookies();

  if (_lodash.default.indexOf(_lodash.default.map(cookies, 'name'), cookieName) === -1) {
    _logger.default.debug(`Cookie '${cookieName}' not found. Ignoring.`);

    return true;
  }

  return await this._deleteCookie(cookieName);
};

commands.deleteCookies = async function deleteCookies() {
  if (!this.isWebContext()) {
    throw new _baseDriver.errors.NotImplementedError();
  }

  let cookies = await this.getCookies();

  if (cookies.length) {
    for (let cookie of cookies) {
      await this._deleteCookie(cookie.name);
    }
  }

  return true;
};

helpers._deleteCookie = async function _deleteCookie(cookieName) {
  _logger.default.debug(`Deleting cookie '${cookieName}'`);

  let webCookie = _cookies.default.expireCookie(cookieName, {
    path: '/'
  });

  let script = `document.cookie = ${JSON.stringify(webCookie)}`;
  await this.executeAtom('execute_script', [script, []]);
};

helpers.cacheWebElement = function cacheWebElement(el) {
  if (!_lodash.default.isPlainObject(el)) {
    return el;
  }

  const elId = _support.util.unwrapElement(el);

  if (!isValidElementIdentifier(elId)) {
    return el;
  }

  const cacheId = _lodash.default.includes(elId, ':') ? elId : _support.util.uuidV4();
  this.webElementsCache.set(cacheId, elId);
  return _support.util.wrapElement(cacheId);
};

helpers.cacheWebElements = function cacheWebElements(response) {
  const toCached = v => _lodash.default.isArray(v) || _lodash.default.isPlainObject(v) ? this.cacheWebElements(v) : v;

  if (_lodash.default.isArray(response)) {
    return response.map(toCached);
  } else if (_lodash.default.isPlainObject(response)) {
    const result = { ...response,
      ...this.cacheWebElement(response)
    };
    return _lodash.default.toPairs(result).reduce((acc, [key, value]) => {
      acc[key] = toCached(value);
      return acc;
    }, {});
  }

  return response;
};

extensions.findWebElementOrElements = async function findWebElementOrElements(strategy, selector, many, ctx) {
  const contextElement = _lodash.default.isNil(ctx) ? null : this.getAtomsElement(ctx);
  let element;

  let doFind = async () => {
    element = await this.executeAtom(`find_element${many ? 's' : ''}`, [strategy, selector, contextElement]);
    return !_lodash.default.isNull(element);
  };

  try {
    await this.implicitWaitForCondition(doFind);
  } catch (err) {
    if (err.message && _lodash.default.isFunction(err.message.match) && err.message.match(/Condition unmet/)) {
      element = [];
    } else {
      throw err;
    }
  }

  if (many) {
    return this.cacheWebElements(element);
  }

  if (_lodash.default.isEmpty(element)) {
    throw new _baseDriver.errors.NoSuchElementError();
  }

  return this.cacheWebElements(element);
};

extensions.clickWebCoords = async function clickWebCoords() {
  let coords = await this.translateWebCoords(this.curWebCoords);
  await this.clickCoords(coords);
};

helpers.executeAtom = async function executeAtom(atom, args, alwaysDefaultFrame = false) {
  let frames = alwaysDefaultFrame === true ? [] : this.curWebFrames;
  let promise = this.remote.executeAtom(atom, args, frames);
  return await this.waitForAtom(promise);
};

helpers.executeAtomAsync = async function executeAtomAsync(atom, args, responseUrl) {
  let promise = new _bluebird.default((resolve, reject) => {
    this.asyncPromise = {
      resolve,
      reject
    };
  });
  await this.remote.executeAtomAsync(atom, args, this.curWebFrames, responseUrl);
  return await this.waitForAtom(promise);
};

helpers.getAtomsElement = function getAtomsElement(elOrId) {
  const elId = _support.util.unwrapElement(elOrId);

  if (!this.webElementsCache.has(elId)) {
    throw new _baseDriver.errors.StaleElementReferenceError();
  }

  return {
    ELEMENT: this.webElementsCache.get(elId)
  };
};

helpers.convertElementsForAtoms = function convertElementsForAtoms(args = []) {
  return args.map(arg => {
    if (helpers.hasElementId(arg)) {
      try {
        return this.getAtomsElement(arg);
      } catch (err) {
        if (!(0, _baseDriver.isErrorType)(err, _baseDriver.errors.StaleElementReferenceError)) {
          throw err;
        }
      }

      return arg;
    }

    return _lodash.default.isArray(arg) ? this.convertElementsForAtoms(arg) : arg;
  });
};

helpers.getElementId = function getElementId(element) {
  return element.ELEMENT || element[W3C_WEB_ELEMENT_IDENTIFIER];
};

helpers.hasElementId = function hasElementId(element) {
  return _support.util.hasValue(element) && (_support.util.hasValue(element.ELEMENT) || _support.util.hasValue(element[W3C_WEB_ELEMENT_IDENTIFIER]));
};

extensions.getSafariIsIphone = _lodash.default.memoize(async function getSafariIsIphone() {
  try {
    const userAgent = await this.execute('return navigator.userAgent');
    return userAgent.toLowerCase().includes('iphone');
  } catch (err) {
    _logger.default.warn(`Unable to find device type from useragent. Assuming iPhone`);

    _logger.default.debug(`Error: ${err.message}`);
  }

  return true;
});
extensions.getSafariDeviceSize = _lodash.default.memoize(async function getSafariDeviceSize() {
  const script = 'return {height: window.screen.availHeight * window.devicePixelRatio, width: window.screen.availWidth * window.devicePixelRatio};';
  const {
    width,
    height
  } = await this.execute(script);
  const [normHeight, normWidth] = height > width ? [height, width] : [width, height];
  return {
    width: normWidth,
    height: normHeight
  };
});
extensions.getSafariIsNotched = _lodash.default.memoize(async function getSafariIsNotched() {
  try {
    const {
      width,
      height
    } = await this.getSafariDeviceSize();

    for (const device of NOTCHED_DEVICE_SIZES) {
      if (device.w === width && device.h === height) {
        return true;
      }
    }
  } catch (err) {
    _logger.default.warn(`Unable to find device type from dimensions. Assuming the device is not notched`);

    _logger.default.debug(`Error: ${err.message}`);
  }

  return false;
});

extensions.getExtraTranslateWebCoordsOffset = async function getExtraTranslateWebCoordsOffset(wvPos, realDims) {
  let topOffset = 0;
  let bottomOffset = 0;
  const isIphone = await this.getSafariIsIphone();
  const {
    nativeWebTapTabBarVisibility,
    nativeWebTapSmartAppBannerVisibility,
    safariTabBarPosition = _support.util.compareVersions(this.opts.platformVersion, '>=', '15.0') && isIphone ? TAB_BAR_POSITION_BOTTOM : TAB_BAR_POSITION_TOP
  } = await this.settings.getSettings();

  let tabBarVisibility = _lodash.default.lowerCase(nativeWebTapTabBarVisibility);

  let bannerVisibility = _lodash.default.lowerCase(nativeWebTapSmartAppBannerVisibility);

  const tabBarPosition = _lodash.default.lowerCase(safariTabBarPosition);

  if (!VISIBILITIES.includes(tabBarVisibility)) {
    tabBarVisibility = DETECT;
  }

  if (!VISIBILITIES.includes(bannerVisibility)) {
    bannerVisibility = DETECT;
  }

  if (!TAB_BAR_POSSITIONS.includes(tabBarPosition)) {
    throw new _baseDriver.errors.InvalidArgumentError(`${safariTabBarPosition} is invalid as Safari tab bar position. Available positions are ${TAB_BAR_POSSITIONS}.`);
  }

  const isNotched = isIphone && (await this.getSafariIsNotched());
  const orientation = realDims.h > realDims.w ? 'PORTRAIT' : 'LANDSCAPE';
  const notchOffset = isNotched ? _support.util.compareVersions(this.opts.platformVersion, '=', '13.0') ? IPHONE_X_NOTCH_OFFSET_IOS_13 : IPHONE_X_NOTCH_OFFSET_IOS : 0;
  const isScrolled = await this.execute('return document.documentElement.scrollTop > 0');

  if (isScrolled) {
    topOffset = IPHONE_SCROLLED_TOP_BAR_HEIGHT + notchOffset;

    if (isNotched) {
      topOffset -= IPHONE_X_SCROLLED_OFFSET;
    }

    if (orientation === 'LANDSCAPE' && isIphone) {
      topOffset = 0;
    }
  } else {
    topOffset = tabBarPosition === TAB_BAR_POSITION_BOTTOM ? 0 : IPHONE_TOP_BAR_HEIGHT;
    topOffset += notchOffset;

    _logger.default.debug(`tabBarPosition and topOffset: ${tabBarPosition}, ${topOffset}`);

    if (isIphone) {
      if (orientation === 'PORTRAIT') {
        bottomOffset = IPHONE_BOTTOM_BAR_OFFSET;
      } else {
        topOffset = IPHONE_LANDSCAPE_TOP_BAR_HEIGHT;
      }
    }

    if (orientation === 'LANDSCAPE' || !isIphone) {
      if (tabBarVisibility === VISIBLE) {
        topOffset += TAB_BAR_OFFSET;
      } else if (tabBarVisibility === DETECT) {
        const contextsAndViews = await this.getContextsAndViews();
        const tabs = contextsAndViews.filter(ctx => ctx.id.startsWith('WEBVIEW_'));

        if (tabs.length > 1) {
          _logger.default.debug(`Found ${tabs.length} tabs. Assuming the tab bar is visible`);

          topOffset += TAB_BAR_OFFSET;
        }
      }
    }
  }

  topOffset += await this.getExtraNativeWebTapOffset(isIphone, bannerVisibility);
  wvPos.y += topOffset;
  realDims.h -= topOffset + bottomOffset;
};

extensions.getExtraNativeWebTapOffset = async function getExtraNativeWebTapOffset(isIphone, bannerVisibility) {
  let offset = 0;

  if (bannerVisibility === VISIBLE) {
    offset += isIphone ? IPHONE_WEB_COORD_SMART_APP_BANNER_OFFSET : IPAD_WEB_COORD_SMART_APP_BANNER_OFFSET;
  } else if (bannerVisibility === DETECT) {
    const banners = await this.findNativeElementOrElements('accessibility id', 'Close app download offer', true);

    if (banners.length > 0) {
      offset += isIphone ? IPHONE_WEB_COORD_SMART_APP_BANNER_OFFSET : IPAD_WEB_COORD_SMART_APP_BANNER_OFFSET;
    }
  }

  _logger.default.debug(`Additional native web tap offset computed: ${offset}`);

  return offset;
};

async function tapWebElementNatively(driver, atomsElement) {
  try {
    let text = await driver.executeAtom('get_text', [atomsElement]);

    if (!text) {
      text = await driver.executeAtom('get_attribute_value', [atomsElement, 'value']);
    }

    if (text) {
      const els = await driver.findNativeElementOrElements('accessibility id', text, true);

      if (els.length === 1 || els.length === 2) {
        const el = els[0];
        const rect = await driver.proxyCommand(`/element/${_support.util.unwrapElement(el)}/rect`, 'GET');

        if (els.length === 2) {
          const el2 = els[1];
          const rect2 = await driver.proxyCommand(`/element/${_support.util.unwrapElement(el2)}/rect`, 'GET');

          if (rect.x !== rect2.x || rect.y !== rect2.y || rect.width !== rect2.width || rect.height !== rect2.height) {
            return false;
          }
        }

        const coords = {
          x: Math.round(rect.x + rect.width / 2),
          y: Math.round(rect.y + rect.height / 2)
        };
        await driver.clickCoords(coords);
        return true;
      }
    }
  } catch (err) {
    _logger.default.warn(`Error attempting to click: ${err.message}`);
  }

  return false;
}

extensions.nativeWebTap = async function nativeWebTap(el) {
  const atomsElement = this.getAtomsElement(el);

  if (!(await this.settings.getSettings()).nativeWebTapStrict && (await tapWebElementNatively(this, atomsElement))) {
    return;
  }

  _logger.default.warn('Unable to do simple native web tap. Attempting to convert coordinates');

  await _bluebird.default.Promise.all([this.executeAtom('get_size', [atomsElement]), this.executeAtom('get_top_left_coordinates', [atomsElement])]);
  const [size, coordinates] = await _bluebird.default.Promise.all([this.executeAtom('get_size', [atomsElement]), this.executeAtom('get_top_left_coordinates', [atomsElement])]);
  const {
    width,
    height
  } = size;
  let {
    x,
    y
  } = coordinates;
  x += width / 2;
  y += height / 2;
  this.curWebCoords = {
    x,
    y
  };
  await this.clickWebCoords();
};

extensions.clickCoords = async function clickCoords(coords) {
  await this.performTouch([{
    action: 'tap',
    options: coords
  }]);
};

extensions.translateWebCoords = async function translateWebCoords(coords) {
  _logger.default.debug(`Translating coordinates (${JSON.stringify(coords)}) to web coordinates`);

  let webview;

  try {
    webview = await (0, _asyncbox.retryInterval)(5, 100, async () => await this.findNativeElementOrElements('class name', 'XCUIElementTypeWebView', false));
  } catch (ign) {}

  if (!webview) {
    throw new Error(`No WebView found. Unable to translate web coordinates for native web tap.`);
  }

  webview = _support.util.unwrapElement(webview);
  const rect = await this.proxyCommand(`/element/${webview}/rect`, 'GET');
  const wvPos = {
    x: rect.x,
    y: rect.y
  };
  const realDims = {
    w: rect.width,
    h: rect.height
  };
  const cmd = '(function () { return {w: window.innerWidth, h: window.innerHeight}; })()';
  const wvDims = await this.remote.execute(cmd);
  const implicitWaitMs = this.implicitWaitMs;
  await this.setImplicitWait(0);

  try {
    await this.getExtraTranslateWebCoordsOffset(wvPos, realDims);
  } finally {
    await this.setImplicitWait(implicitWaitMs);
  }

  if (wvDims && realDims && wvPos) {
    let xRatio = realDims.w / wvDims.w;
    let yRatio = realDims.h / wvDims.h;
    let newCoords = {
      x: wvPos.x + Math.round(xRatio * coords.x),
      y: wvPos.y + Math.round(yRatio * coords.y)
    };

    _logger.default.debug(`Converted coordinates: ${JSON.stringify(newCoords)}`);

    _logger.default.debug(`    rect: ${JSON.stringify(rect)}`);

    _logger.default.debug(`    wvPos: ${JSON.stringify(wvPos)}`);

    _logger.default.debug(`    realDims: ${JSON.stringify(realDims)}`);

    _logger.default.debug(`    wvDims: ${JSON.stringify(wvDims)}`);

    _logger.default.debug(`    xRatio: ${JSON.stringify(xRatio)}`);

    _logger.default.debug(`    yRatio: ${JSON.stringify(yRatio)}`);

    _logger.default.debug(`Converted web coords ${JSON.stringify(coords)} ` + `into real coords ${JSON.stringify(newCoords)}`);

    return newCoords;
  }
};

extensions.checkForAlert = async function checkForAlert() {
  return _lodash.default.isString(await this.getAlertText());
};

extensions.waitForAtom = async function waitForAtom(promise) {
  const timer = new _support.timing.Timer().start();

  const timedAtomPromise = _bluebird.default.resolve(promise).timeout(ATOM_WAIT_TIMEOUT_MS);

  const handlePromiseError = async p => {
    try {
      return await p;
    } catch (err) {
      const originalError = err instanceof _bluebird.default.AggregateError ? err[0] : err;

      _logger.default.debug(`Error received while executing atom: ${originalError.message}`);

      if (originalError instanceof _bluebird.default.TimeoutError) {
        throw new Error(`Did not get any response for atom execution after ` + `${timer.getDuration().asMilliSeconds.toFixed(0)}ms`);
      }

      throw originalError;
    }
  };

  await handlePromiseError(_bluebird.default.any([_bluebird.default.delay(ATOM_INITIAL_WAIT_MS), timedAtomPromise]));

  if (timedAtomPromise.isFulfilled()) {
    return await timedAtomPromise;
  }

  if (!_lodash.default.isPlainObject(this._waitingAtoms)) {
    this._waitingAtoms = {
      count: 0,
      alertNotifier: new _events.EventEmitter(),
      alertMonitor: _bluebird.default.resolve()
    };
  }

  this._waitingAtoms.count++;
  let onAlertCallback;

  try {
    if (this._waitingAtoms.alertMonitor.isResolved()) {
      this._waitingAtoms.alertMonitor = _bluebird.default.resolve((async () => {
        while (this._waitingAtoms.count > 0) {
          try {
            if (await this.checkForAlert()) {
              this._waitingAtoms.alertNotifier.emit(ON_OBSTRUCTING_ALERT_EVENT);
            }
          } catch (ign) {}

          await _bluebird.default.delay(ATOM_INITIAL_WAIT_MS / 2);
        }
      })());
    }

    return await new _bluebird.default((resolve, reject) => {
      onAlertCallback = () => reject(new _baseDriver.errors.UnexpectedAlertOpenError());

      this._waitingAtoms.alertNotifier.once(ON_OBSTRUCTING_ALERT_EVENT, onAlertCallback);

      handlePromiseError(timedAtomPromise).then(resolve).catch(reject);
    });
  } finally {
    if (onAlertCallback) {
      this._waitingAtoms.alertNotifier.removeListener(ON_OBSTRUCTING_ALERT_EVENT, onAlertCallback);
    }

    this._waitingAtoms.count--;
  }
};

extensions.mobileWebNav = async function mobileWebNav(navType) {
  this.remote.allowNavigationWithoutReload = true;

  try {
    await this.executeAtom('execute_script', [`history.${navType}();`, null]);
  } finally {
    this.remote.allowNavigationWithoutReload = false;
  }
};

Object.assign(commands, extensions, helpers);
var _default = commands;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9jb21tYW5kcy93ZWIuanMiXSwibmFtZXMiOlsiSVBIT05FX1RPUF9CQVJfSEVJR0hUIiwiSVBIT05FX1NDUk9MTEVEX1RPUF9CQVJfSEVJR0hUIiwiSVBIT05FX1hfU0NST0xMRURfT0ZGU0VUIiwiSVBIT05FX1hfTk9UQ0hfT0ZGU0VUX0lPUyIsIklQSE9ORV9YX05PVENIX09GRlNFVF9JT1NfMTMiLCJJUEhPTkVfTEFORFNDQVBFX1RPUF9CQVJfSEVJR0hUIiwiSVBIT05FX0JPVFRPTV9CQVJfT0ZGU0VUIiwiVEFCX0JBUl9PRkZTRVQiLCJJUEhPTkVfV0VCX0NPT1JEX1NNQVJUX0FQUF9CQU5ORVJfT0ZGU0VUIiwiSVBBRF9XRUJfQ09PUkRfU01BUlRfQVBQX0JBTk5FUl9PRkZTRVQiLCJOT1RDSEVEX0RFVklDRV9TSVpFUyIsInciLCJoIiwiVzNDX1dFQl9FTEVNRU5UX0lERU5USUZJRVIiLCJ1dGlsIiwiQVRPTV9XQUlUX1RJTUVPVVRfTVMiLCJBVE9NX0lOSVRJQUxfV0FJVF9NUyIsIk9OX09CU1RSVUNUSU5HX0FMRVJUX0VWRU5UIiwiVklTSUJMRSIsIklOVklTSUJMRSIsIkRFVEVDVCIsIlZJU0lCSUxJVElFUyIsIlRBQl9CQVJfUE9TSVRJT05fVE9QIiwiVEFCX0JBUl9QT1NJVElPTl9CT1RUT00iLCJUQUJfQkFSX1BPU1NJVElPTlMiLCJjb21tYW5kcyIsImhlbHBlcnMiLCJleHRlbnNpb25zIiwiaXNWYWxpZEVsZW1lbnRJZGVudGlmaWVyIiwiaWQiLCJfIiwiaXNTdHJpbmciLCJpc051bWJlciIsImlzRW1wdHkiLCJpc05hTiIsInNldEZyYW1lIiwiZnJhbWUiLCJpc1dlYkNvbnRleHQiLCJlcnJvcnMiLCJOb3RJbXBsZW1lbnRlZEVycm9yIiwiaXNOdWxsIiwiY3VyV2ViRnJhbWVzIiwibG9nIiwiZGVidWciLCJoYXNFbGVtZW50SWQiLCJhdG9tc0VsZW1lbnQiLCJnZXRBdG9tc0VsZW1lbnQiLCJ2YWx1ZSIsImV4ZWN1dGVBdG9tIiwiV0lORE9XIiwidW5zaGlmdCIsImF0b20iLCJpc1VuZGVmaW5lZCIsIk5vU3VjaEZyYW1lRXJyb3IiLCJnZXRDc3NQcm9wZXJ0eSIsInByb3BlcnR5TmFtZSIsImVsIiwic3VibWl0IiwicmVmcmVzaCIsImdldFVybCIsInJlbW90ZSIsImV4ZWN1dGUiLCJ0aXRsZSIsImdldENvb2tpZXMiLCJzY3JpcHQiLCJqc0Nvb2tpZXMiLCJjb29raWVzIiwibmFtZSIsInRvUGFpcnMiLCJjb29raWVVdGlscyIsImNyZWF0ZUpXUENvb2tpZSIsInVuZGVmaW5lZCIsInB1c2giLCJlcnIiLCJlcnJvciIsIlVua25vd25FcnJvciIsInNldENvb2tpZSIsImNvb2tpZSIsImNsb25lIiwicGF0aCIsImpzQ29va2llIiwiY3JlYXRlSlNDb29raWUiLCJleHBpcmVzIiwiZXhwaXJ5IiwiRGF0ZSIsInRvVVRDU3RyaW5nIiwiZG9tYWluIiwiaHR0cE9ubHkiLCJzZWN1cmUiLCJKU09OIiwic3RyaW5naWZ5IiwiZGVsZXRlQ29va2llIiwiY29va2llTmFtZSIsImluZGV4T2YiLCJtYXAiLCJfZGVsZXRlQ29va2llIiwiZGVsZXRlQ29va2llcyIsImxlbmd0aCIsIndlYkNvb2tpZSIsImV4cGlyZUNvb2tpZSIsImNhY2hlV2ViRWxlbWVudCIsImlzUGxhaW5PYmplY3QiLCJlbElkIiwidW53cmFwRWxlbWVudCIsImNhY2hlSWQiLCJpbmNsdWRlcyIsInV1aWRWNCIsIndlYkVsZW1lbnRzQ2FjaGUiLCJzZXQiLCJ3cmFwRWxlbWVudCIsImNhY2hlV2ViRWxlbWVudHMiLCJyZXNwb25zZSIsInRvQ2FjaGVkIiwidiIsImlzQXJyYXkiLCJyZXN1bHQiLCJyZWR1Y2UiLCJhY2MiLCJrZXkiLCJmaW5kV2ViRWxlbWVudE9yRWxlbWVudHMiLCJzdHJhdGVneSIsInNlbGVjdG9yIiwibWFueSIsImN0eCIsImNvbnRleHRFbGVtZW50IiwiaXNOaWwiLCJlbGVtZW50IiwiZG9GaW5kIiwiaW1wbGljaXRXYWl0Rm9yQ29uZGl0aW9uIiwibWVzc2FnZSIsImlzRnVuY3Rpb24iLCJtYXRjaCIsIk5vU3VjaEVsZW1lbnRFcnJvciIsImNsaWNrV2ViQ29vcmRzIiwiY29vcmRzIiwidHJhbnNsYXRlV2ViQ29vcmRzIiwiY3VyV2ViQ29vcmRzIiwiY2xpY2tDb29yZHMiLCJhcmdzIiwiYWx3YXlzRGVmYXVsdEZyYW1lIiwiZnJhbWVzIiwicHJvbWlzZSIsIndhaXRGb3JBdG9tIiwiZXhlY3V0ZUF0b21Bc3luYyIsInJlc3BvbnNlVXJsIiwiQiIsInJlc29sdmUiLCJyZWplY3QiLCJhc3luY1Byb21pc2UiLCJlbE9ySWQiLCJoYXMiLCJTdGFsZUVsZW1lbnRSZWZlcmVuY2VFcnJvciIsIkVMRU1FTlQiLCJnZXQiLCJjb252ZXJ0RWxlbWVudHNGb3JBdG9tcyIsImFyZyIsImdldEVsZW1lbnRJZCIsImhhc1ZhbHVlIiwiZ2V0U2FmYXJpSXNJcGhvbmUiLCJtZW1vaXplIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJ3YXJuIiwiZ2V0U2FmYXJpRGV2aWNlU2l6ZSIsIndpZHRoIiwiaGVpZ2h0Iiwibm9ybUhlaWdodCIsIm5vcm1XaWR0aCIsImdldFNhZmFyaUlzTm90Y2hlZCIsImRldmljZSIsImdldEV4dHJhVHJhbnNsYXRlV2ViQ29vcmRzT2Zmc2V0Iiwid3ZQb3MiLCJyZWFsRGltcyIsInRvcE9mZnNldCIsImJvdHRvbU9mZnNldCIsImlzSXBob25lIiwibmF0aXZlV2ViVGFwVGFiQmFyVmlzaWJpbGl0eSIsIm5hdGl2ZVdlYlRhcFNtYXJ0QXBwQmFubmVyVmlzaWJpbGl0eSIsInNhZmFyaVRhYkJhclBvc2l0aW9uIiwiY29tcGFyZVZlcnNpb25zIiwib3B0cyIsInBsYXRmb3JtVmVyc2lvbiIsInNldHRpbmdzIiwiZ2V0U2V0dGluZ3MiLCJ0YWJCYXJWaXNpYmlsaXR5IiwibG93ZXJDYXNlIiwiYmFubmVyVmlzaWJpbGl0eSIsInRhYkJhclBvc2l0aW9uIiwiSW52YWxpZEFyZ3VtZW50RXJyb3IiLCJpc05vdGNoZWQiLCJvcmllbnRhdGlvbiIsIm5vdGNoT2Zmc2V0IiwiaXNTY3JvbGxlZCIsImNvbnRleHRzQW5kVmlld3MiLCJnZXRDb250ZXh0c0FuZFZpZXdzIiwidGFicyIsImZpbHRlciIsInN0YXJ0c1dpdGgiLCJnZXRFeHRyYU5hdGl2ZVdlYlRhcE9mZnNldCIsInkiLCJvZmZzZXQiLCJiYW5uZXJzIiwiZmluZE5hdGl2ZUVsZW1lbnRPckVsZW1lbnRzIiwidGFwV2ViRWxlbWVudE5hdGl2ZWx5IiwiZHJpdmVyIiwidGV4dCIsImVscyIsInJlY3QiLCJwcm94eUNvbW1hbmQiLCJlbDIiLCJyZWN0MiIsIngiLCJNYXRoIiwicm91bmQiLCJuYXRpdmVXZWJUYXAiLCJuYXRpdmVXZWJUYXBTdHJpY3QiLCJQcm9taXNlIiwiYWxsIiwic2l6ZSIsImNvb3JkaW5hdGVzIiwicGVyZm9ybVRvdWNoIiwiYWN0aW9uIiwib3B0aW9ucyIsIndlYnZpZXciLCJpZ24iLCJFcnJvciIsImNtZCIsInd2RGltcyIsImltcGxpY2l0V2FpdE1zIiwic2V0SW1wbGljaXRXYWl0IiwieFJhdGlvIiwieVJhdGlvIiwibmV3Q29vcmRzIiwiY2hlY2tGb3JBbGVydCIsImdldEFsZXJ0VGV4dCIsInRpbWVyIiwidGltaW5nIiwiVGltZXIiLCJzdGFydCIsInRpbWVkQXRvbVByb21pc2UiLCJ0aW1lb3V0IiwiaGFuZGxlUHJvbWlzZUVycm9yIiwicCIsIm9yaWdpbmFsRXJyb3IiLCJBZ2dyZWdhdGVFcnJvciIsIlRpbWVvdXRFcnJvciIsImdldER1cmF0aW9uIiwiYXNNaWxsaVNlY29uZHMiLCJ0b0ZpeGVkIiwiYW55IiwiZGVsYXkiLCJpc0Z1bGZpbGxlZCIsIl93YWl0aW5nQXRvbXMiLCJjb3VudCIsImFsZXJ0Tm90aWZpZXIiLCJFdmVudEVtaXR0ZXIiLCJhbGVydE1vbml0b3IiLCJvbkFsZXJ0Q2FsbGJhY2siLCJpc1Jlc29sdmVkIiwiZW1pdCIsIlVuZXhwZWN0ZWRBbGVydE9wZW5FcnJvciIsIm9uY2UiLCJ0aGVuIiwiY2F0Y2giLCJyZW1vdmVMaXN0ZW5lciIsIm1vYmlsZVdlYk5hdiIsIm5hdlR5cGUiLCJhbGxvd05hdmlnYXRpb25XaXRob3V0UmVsb2FkIiwiT2JqZWN0IiwiYXNzaWduIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBLE1BQU1BLHFCQUFxQixHQUFHLEVBQTlCO0FBQ0EsTUFBTUMsOEJBQThCLEdBQUcsRUFBdkM7QUFDQSxNQUFNQyx3QkFBd0IsR0FBRyxFQUFqQztBQUNBLE1BQU1DLHlCQUF5QixHQUFHLEVBQWxDO0FBQ0EsTUFBTUMsNEJBQTRCLEdBQUcsRUFBckM7QUFFQSxNQUFNQywrQkFBK0IsR0FBRyxFQUF4QztBQUNBLE1BQU1DLHdCQUF3QixHQUFHLEVBQWpDO0FBQ0EsTUFBTUMsY0FBYyxHQUFHLEVBQXZCO0FBQ0EsTUFBTUMsd0NBQXdDLEdBQUcsRUFBakQ7QUFDQSxNQUFNQyxzQ0FBc0MsR0FBRyxFQUEvQztBQUVBLE1BQU1DLG9CQUFvQixHQUFHLENBQzNCO0FBQUNDLEVBQUFBLENBQUMsRUFBRSxJQUFKO0FBQVVDLEVBQUFBLENBQUMsRUFBRTtBQUFiLENBRDJCLEVBRTNCO0FBQUNELEVBQUFBLENBQUMsRUFBRSxHQUFKO0FBQVNDLEVBQUFBLENBQUMsRUFBRTtBQUFaLENBRjJCLEVBRzNCO0FBQUNELEVBQUFBLENBQUMsRUFBRSxJQUFKO0FBQVVDLEVBQUFBLENBQUMsRUFBRTtBQUFiLENBSDJCLENBQTdCO0FBTUEsTUFBTTtBQUFFQyxFQUFBQTtBQUFGLElBQWlDQyxhQUF2QztBQUVBLE1BQU1DLG9CQUFvQixHQUFHLElBQUksS0FBakM7QUFDQSxNQUFNQyxvQkFBb0IsR0FBRyxJQUE3QjtBQUVBLE1BQU1DLDBCQUEwQixHQUFHLE9BQW5DO0FBRUEsTUFBTUMsT0FBTyxHQUFHLFNBQWhCO0FBQ0EsTUFBTUMsU0FBUyxHQUFHLFdBQWxCO0FBQ0EsTUFBTUMsTUFBTSxHQUFHLFFBQWY7QUFDQSxNQUFNQyxZQUFZLEdBQUcs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cEIsRUFBMEIsSUFBMUIsQ0FBbkMsQ0FBTjtBQUNELEdBRkQsU0FFVTtBQUNSLFNBQUs5TSxNQUFMLENBQVkrTSw0QkFBWixHQUEyQyxLQUEzQztBQUNEO0FBQ0YsQ0FQRDs7QUFTQUMsTUFBTSxDQUFDQyxNQUFQLENBQWNwUCxRQUFkLEVBQXdCRSxVQUF4QixFQUFvQ0QsT0FBcEM7ZUFFZUQsUSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJldHJ5SW50ZXJ2YWwgfSBmcm9tICdhc3luY2JveCc7XG5pbXBvcnQgeyB1dGlsLCB0aW1pbmcgfSBmcm9tICdAYXBwaXVtL3N1cHBvcnQnO1xuaW1wb3J0IGxvZyBmcm9tICcuLi9sb2dnZXInO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBCIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCB7IGVycm9ycywgaXNFcnJvclR5cGUgfSBmcm9tICdAYXBwaXVtL2Jhc2UtZHJpdmVyJztcbmltcG9ydCBjb29raWVVdGlscyBmcm9tICcuLi9jb29raWVzJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XG5cbmNvbnN0IElQSE9ORV9UT1BfQkFSX0hFSUdIVCA9IDcxO1xuY29uc3QgSVBIT05FX1NDUk9MTEVEX1RPUF9CQVJfSEVJR0hUID0gNDE7XG5jb25zdCBJUEhPTkVfWF9TQ1JPTExFRF9PRkZTRVQgPSA1NTtcbmNvbnN0IElQSE9ORV9YX05PVENIX09GRlNFVF9JT1MgPSAyNDtcbmNvbnN0IElQSE9ORV9YX05PVENIX09GRlNFVF9JT1NfMTMgPSAyMDtcblxuY29uc3QgSVBIT05FX0xBTkRTQ0FQRV9UT1BfQkFSX0hFSUdIVCA9IDUxO1xuY29uc3QgSVBIT05FX0JPVFRPTV9CQVJfT0ZGU0VUID0gNDk7XG5jb25zdCBUQUJfQkFSX09GRlNFVCA9IDMzO1xuY29uc3QgSVBIT05FX1dFQl9DT09SRF9TTUFSVF9BUFBfQkFOTkVSX09GRlNFVCA9IDg0O1xuY29uc3QgSVBBRF9XRUJfQ09PUkRfU01BUlRfQVBQX0JBTk5FUl9PRkZTRVQgPSA5NTtcblxuY29uc3QgTk9UQ0hFRF9ERVZJQ0VfU0laRVMgPSBbXG4gIHt3OiAxMTI1LCBoOiAyNDM2fSwgLy8gMTEgUHJvLCBYLCBYc1xuICB7dzogODI4LCBoOiAxNzkyfSwgLy8gMTEsIFhyXG4gIHt3OiAxMjQyLCBoOiAyNjg4fSwgLy8gMTEgUHJvIE1heCwgWHMgTWF4XG5dO1xuXG5jb25zdCB7IFczQ19XRUJfRUxFTUVOVF9JREVOVElGSUVSIH0gPSB1dGlsO1xuXG5jb25zdCBBVE9NX1dBSVRfVElNRU9VVF9NUyA9IDIgKiA2MDAwMDtcbmNvbnN0IEFUT01fSU5JVElBTF9XQUlUX01TID0gMTAwMDtcblxuY29uc3QgT05fT0JTVFJVQ1RJTkdfQUxFUlRfRVZFTlQgPSAnYWxlcnQnO1xuXG5jb25zdCBWSVNJQkxFID0gJ3Zpc2libGUnO1xuY29uc3QgSU5WSVNJQkxFID0gJ2ludmlzaWJsZSc7XG5jb25zdCBERVRFQ1QgPSAnZGV0ZWN0JztcbmNvbnN0IFZJU0lCSUxJVElFUyA9IFtWSVNJQkxFLCBJTlZJU0lCTEUsIERFVEVDVF07XG5cbi8vIFRoZSBwb3NpdGlvbiBvZiBTYWZhcmkncyB0YWIgKHNlYXJjaCBiYXIpLlxuLy8gU2luY2UgaU9TIDE1LCB0aGUgYmFyIGlzIHRoZSBib3R0b20gYnkgZGVmYXVsdC5cbmNvbnN0IFRBQl9CQVJfUE9TSVRJT05fVE9QID0gJ3RvcCc7XG5jb25zdCBUQUJfQkFSX1BPU0lUSU9OX0JPVFRPTSA9ICdib3R0b20nO1xuY29uc3QgVEFCX0JBUl9QT1NTSVRJT05TID0gW1RBQl9CQVJfUE9TSVRJT05fVE9QLCBUQUJfQkFSX1BPU0lUSU9OX0JPVFRPTV07XG5cbmNvbnN0IGNvbW1hbmRzID0ge30sIGhlbHBlcnMgPSB7fSwgZXh0ZW5zaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBpc1ZhbGlkRWxlbWVudElkZW50aWZpZXIgKGlkKSB7XG4gIGlmICghXy5pc1N0cmluZyhpZCkgJiYgIV8uaXNOdW1iZXIoaWQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChfLmlzU3RyaW5nKGlkKSAmJiBfLmlzRW1wdHkoaWQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChfLmlzTnVtYmVyKGlkKSAmJiBpc05hTihpZCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmNvbW1hbmRzLnNldEZyYW1lID0gYXN5bmMgZnVuY3Rpb24gc2V0RnJhbWUgKGZyYW1lKSB7XG4gIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICB9XG5cbiAgaWYgKF8uaXNOdWxsKGZyYW1lKSkge1xuICAgIHRoaXMuY3VyV2ViRnJhbWVzID0gW107XG4gICAgbG9nLmRlYnVnKCdMZWF2aW5nIHdlYiBmcmFtZSBhbmQgZ29pbmcgYmFjayB0byBkZWZhdWx0IGNvbnRlbnQnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaGVscGVycy5oYXNFbGVtZW50SWQoZnJhbWUpKSB7XG4gICAgY29uc3QgYXRvbXNFbGVtZW50ID0gdGhpcy5nZXRBdG9tc0VsZW1lbnQoZnJhbWUpO1xuICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgdGhpcy5leGVjdXRlQXRvbSgnZ2V0X2ZyYW1lX3dpbmRvdycsIFthdG9tc0VsZW1lbnRdKTtcbiAgICBsb2cuZGVidWcoYEVudGVyaW5nIG5ldyB3ZWIgZnJhbWU6ICcke3ZhbHVlLldJTkRPV30nYCk7XG4gICAgdGhpcy5jdXJXZWJGcmFtZXMudW5zaGlmdCh2YWx1ZS5XSU5ET1cpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGF0b20gPSBfLmlzTnVtYmVyKGZyYW1lKSA/ICdmcmFtZV9ieV9pbmRleCcgOiAnZnJhbWVfYnlfaWRfb3JfbmFtZSc7XG4gICAgY29uc3QgdmFsdWUgPSBhd2FpdCB0aGlzLmV4ZWN1dGVBdG9tKGF0b20sIFtmcmFtZV0pO1xuICAgIGlmIChfLmlzTnVsbCh2YWx1ZSkgfHwgXy5pc1VuZGVmaW5lZCh2YWx1ZS5XSU5ET1cpKSB7XG4gICAgICB0aHJvdyBuZXcgZXJyb3JzLk5vU3VjaEZyYW1lRXJyb3IoKTtcbiAgICB9XG4gICAgbG9nLmRlYnVnKGBFbnRlcmluZyBuZXcgd2ViIGZyYW1lOiAnJHt2YWx1ZS5XSU5ET1d9J2ApO1xuICAgIHRoaXMuY3VyV2ViRnJhbWVzLnVuc2hpZnQodmFsdWUuV0lORE9XKTtcbiAgfVxufTtcblxuY29tbWFuZHMuZ2V0Q3NzUHJvcGVydHkgPSBhc3luYyBmdW5jdGlvbiBnZXRDc3NQcm9wZXJ0eSAocHJvcGVydHlOYW1lLCBlbCkge1xuICBpZiAoIXRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfVxuXG4gIGNvbnN0IGF0b21zRWxlbWVudCA9IHRoaXMuZ2V0QXRvbXNFbGVtZW50KGVsKTtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2dldF92YWx1ZV9vZl9jc3NfcHJvcGVydHknLCBbYXRvbXNFbGVtZW50LCBwcm9wZXJ0eU5hbWVdKTtcbn07XG5cbmNvbW1hbmRzLnN1Ym1pdCA9IGFzeW5jIGZ1bmN0aW9uIHN1Ym1pdCAoZWwpIHtcbiAgaWYgKCF0aGlzLmlzV2ViQ29udGV4dCgpKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5Ob3RJbXBsZW1lbnRlZEVycm9yKCk7XG4gIH1cblxuICBjb25zdCBhdG9tc0VsZW1lbnQgPSB0aGlzLmdldEF0b21zRWxlbWVudChlbCk7XG4gIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ3N1Ym1pdCcsIFthdG9tc0VsZW1lbnRdKTtcbn07XG5cbmNvbW1hbmRzLnJlZnJlc2ggPSBhc3luYyBmdW5jdGlvbiByZWZyZXNoICgpIHtcbiAgaWYgKCF0aGlzLmlzV2ViQ29udGV4dCgpKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5Ob3RJbXBsZW1lbnRlZEVycm9yKCk7XG4gIH1cblxuICBhd2FpdCB0aGlzLmV4ZWN1dGVBdG9tKCdyZWZyZXNoJywgW10pO1xufTtcblxuY29tbWFuZHMuZ2V0VXJsID0gYXN5bmMgZnVuY3Rpb24gZ2V0VXJsICgpIHtcbiAgaWYgKCF0aGlzLmlzV2ViQ29udGV4dCgpKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5Ob3RJbXBsZW1lbnRlZEVycm9yKCk7XG4gIH1cblxuICByZXR1cm4gYXdhaXQgdGhpcy5yZW1vdGUuZXhlY3V0ZSgnd2luZG93LmxvY2F0aW9uLmhyZWYnKTtcbn07XG5cbmNvbW1hbmRzLnRpdGxlID0gYXN5bmMgZnVuY3Rpb24gdGl0bGUgKCkge1xuICBpZiAoIXRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfVxuXG4gIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBdG9tKCd0aXRsZScsIFtdLCB0cnVlKTtcbn07XG5cbmNvbW1hbmRzLmdldENvb2tpZXMgPSBhc3luYyBmdW5jdGlvbiBnZXRDb29raWVzICgpIHtcbiAgaWYgKCF0aGlzLmlzV2ViQ29udGV4dCgpKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5Ob3RJbXBsZW1lbnRlZEVycm9yKCk7XG4gIH1cblxuICBsb2cuZGVidWcoJ1JldHJpZXZpbmcgYWxsIGNvb2tpZXMnKTtcblxuICBsZXQgc2NyaXB0ID0gJ3JldHVybiBkb2N1bWVudC5jb29raWUnO1xuICBsZXQganNDb29raWVzID0gYXdhaXQgdGhpcy5leGVjdXRlQXRvbSgnZXhlY3V0ZV9zY3JpcHQnLCBbc2NyaXB0LCBbXV0pO1xuXG4gIGxldCBjb29raWVzID0gW107XG4gIHRyeSB7XG4gICAgZm9yIChsZXQgW25hbWUsIHZhbHVlXSBvZiBfLnRvUGFpcnMoY29va2llVXRpbHMuY3JlYXRlSldQQ29va2llKHVuZGVmaW5lZCwganNDb29raWVzKSkpIHtcbiAgICAgIGNvb2tpZXMucHVzaCh7bmFtZSwgdmFsdWV9KTtcbiAgICB9XG4gICAgcmV0dXJuIGNvb2tpZXM7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGxvZy5lcnJvcihlcnIpO1xuICAgIHRocm93IG5ldyBlcnJvcnMuVW5rbm93bkVycm9yKGBFcnJvciBwYXJzaW5nIGNvb2tpZXMgZnJvbSByZXN1bHQ6ICcke2pzQ29va2llc30nYCk7XG4gIH1cbn07XG5cbmNvbW1hbmRzLnNldENvb2tpZSA9IGFzeW5jIGZ1bmN0aW9uIHNldENvb2tpZSAoY29va2llKSB7XG4gIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICB9XG5cbiAgY29va2llID0gXy5jbG9uZShjb29raWUpO1xuXG4gIC8vIGlmIGBwYXRoYCBmaWVsZCBpcyBub3Qgc3BlY2lmaWVkLCBTYWZhcmkgd2lsbCBub3QgdXBkYXRlIGNvb2tpZXMgYXMgZXhwZWN0ZWQ7IGVnIGlzc3VlICMxNzA4XG4gIGlmICghY29va2llLnBhdGgpIHtcbiAgICBjb29raWUucGF0aCA9ICcvJztcbiAgfVxuXG4gIGNvbnN0IGpzQ29va2llID0gY29va2llVXRpbHMuY3JlYXRlSlNDb29raWUoY29va2llLm5hbWUsIGNvb2tpZS52YWx1ZSwge1xuICAgIGV4cGlyZXM6IF8uaXNOdW1iZXIoY29va2llLmV4cGlyeSkgPyAobmV3IERhdGUoY29va2llLmV4cGlyeSAqIDEwMDApKS50b1VUQ1N0cmluZygpIDpcbiAgICAgIGNvb2tpZS5leHBpcnksXG4gICAgcGF0aDogY29va2llLnBhdGgsXG4gICAgZG9tYWluOiBjb29raWUuZG9tYWluLFxuICAgIGh0dHBPbmx5OiBjb29raWUuaHR0cE9ubHksXG4gICAgc2VjdXJlOiBjb29raWUuc2VjdXJlXG4gIH0pO1xuICBsZXQgc2NyaXB0ID0gYGRvY3VtZW50LmNvb2tpZSA9ICR7SlNPTi5zdHJpbmdpZnkoanNDb29raWUpfWA7XG4gIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2V4ZWN1dGVfc2NyaXB0JywgW3NjcmlwdCwgW11dKTtcbn07XG5cbmNvbW1hbmRzLmRlbGV0ZUNvb2tpZSA9IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNvb2tpZSAoY29va2llTmFtZSkge1xuICBpZiAoIXRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfVxuXG4gIC8vIGNoZWNrIGNvb2tpZSBleGlzdGVuY2VcbiAgbGV0IGNvb2tpZXMgPSBhd2FpdCB0aGlzLmdldENvb2tpZXMoKTtcbiAgaWYgKF8uaW5kZXhPZihfLm1hcChjb29raWVzLCAnbmFtZScpLCBjb29raWVOYW1lKSA9PT0gLTEpIHtcbiAgICBsb2cuZGVidWcoYENvb2tpZSAnJHtjb29raWVOYW1lfScgbm90IGZvdW5kLiBJZ25vcmluZy5gKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBhd2FpdCB0aGlzLl9kZWxldGVDb29raWUoY29va2llTmFtZSk7XG59O1xuXG5jb21tYW5kcy5kZWxldGVDb29raWVzID0gYXN5bmMgZnVuY3Rpb24gZGVsZXRlQ29va2llcyAoKSB7XG4gIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICB9XG5cbiAgbGV0IGNvb2tpZXMgPSBhd2FpdCB0aGlzLmdldENvb2tpZXMoKTtcbiAgaWYgKGNvb2tpZXMubGVuZ3RoKSB7XG4gICAgZm9yIChsZXQgY29va2llIG9mIGNvb2tpZXMpIHtcbiAgICAgIGF3YWl0IHRoaXMuX2RlbGV0ZUNvb2tpZShjb29raWUubmFtZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxuaGVscGVycy5fZGVsZXRlQ29va2llID0gYXN5bmMgZnVuY3Rpb24gX2RlbGV0ZUNvb2tpZSAoY29va2llTmFtZSkge1xuICBsb2cuZGVidWcoYERlbGV0aW5nIGNvb2tpZSAnJHtjb29raWVOYW1lfSdgKTtcbiAgbGV0IHdlYkNvb2tpZSA9IGNvb2tpZVV0aWxzLmV4cGlyZUNvb2tpZShjb29raWVOYW1lLCB7cGF0aDogJy8nfSk7XG4gIGxldCBzY3JpcHQgPSBgZG9jdW1lbnQuY29va2llID0gJHtKU09OLnN0cmluZ2lmeSh3ZWJDb29raWUpfWA7XG4gIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2V4ZWN1dGVfc2NyaXB0JywgW3NjcmlwdCwgW11dKTtcbn07XG5cbmhlbHBlcnMuY2FjaGVXZWJFbGVtZW50ID0gZnVuY3Rpb24gY2FjaGVXZWJFbGVtZW50IChlbCkge1xuICBpZiAoIV8uaXNQbGFpbk9iamVjdChlbCkpIHtcbiAgICByZXR1cm4gZWw7XG4gIH1cbiAgY29uc3QgZWxJZCA9IHV0aWwudW53cmFwRWxlbWVudChlbCk7XG4gIGlmICghaXNWYWxpZEVsZW1lbnRJZGVudGlmaWVyKGVsSWQpKSB7XG4gICAgcmV0dXJuIGVsO1xuICB9XG4gIC8vIEluIG5ld2VyIGRlYnVnZ2VyIHJlbGVhc2VzIGVsZW1lbnQgaWRlbnRpZmllcnMgbG9vayBsaWtlIGA6d2RjOjE2MjgxNTE2NDkzMjVgXG4gIC8vIFdlIGFzc3VtZSBpdCBpcyBzYWZlIHRvIHVzZSB0aGVzZSB0byBpZGVudGlmeSBjYWNoZWQgZWxlbWVudHNcbiAgY29uc3QgY2FjaGVJZCA9IF8uaW5jbHVkZXMoZWxJZCwgJzonKSA/IGVsSWQgOiB1dGlsLnV1aWRWNCgpO1xuICB0aGlzLndlYkVsZW1lbnRzQ2FjaGUuc2V0KGNhY2hlSWQsIGVsSWQpO1xuICByZXR1cm4gdXRpbC53cmFwRWxlbWVudChjYWNoZUlkKTtcbn07XG5cbmhlbHBlcnMuY2FjaGVXZWJFbGVtZW50cyA9IGZ1bmN0aW9uIGNhY2hlV2ViRWxlbWVudHMgKHJlc3BvbnNlKSB7XG4gIGNvbnN0IHRvQ2FjaGVkID0gKHYpID0+IF8uaXNBcnJheSh2KSB8fCBfLmlzUGxhaW5PYmplY3QodilcbiAgICA/IHRoaXMuY2FjaGVXZWJFbGVtZW50cyh2KVxuICAgIDogdjtcblxuICBpZiAoXy5pc0FycmF5KHJlc3BvbnNlKSkge1xuICAgIHJldHVybiByZXNwb25zZS5tYXAodG9DYWNoZWQpO1xuICB9IGVsc2UgaWYgKF8uaXNQbGFpbk9iamVjdChyZXNwb25zZSkpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7Li4ucmVzcG9uc2UsIC4uLih0aGlzLmNhY2hlV2ViRWxlbWVudChyZXNwb25zZSkpfTtcbiAgICByZXR1cm4gXy50b1BhaXJzKHJlc3VsdCkucmVkdWNlKFxuICAgICAgKGFjYywgW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGFjY1trZXldID0gdG9DYWNoZWQodmFsdWUpO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSwge31cbiAgICApO1xuICB9XG4gIHJldHVybiByZXNwb25zZTtcbn07XG5cbmV4dGVuc2lvbnMuZmluZFdlYkVsZW1lbnRPckVsZW1lbnRzID0gYXN5bmMgZnVuY3Rpb24gZmluZFdlYkVsZW1lbnRPckVsZW1lbnRzIChzdHJhdGVneSwgc2VsZWN0b3IsIG1hbnksIGN0eCkge1xuICBjb25zdCBjb250ZXh0RWxlbWVudCA9IF8uaXNOaWwoY3R4KSA/IG51bGwgOiB0aGlzLmdldEF0b21zRWxlbWVudChjdHgpO1xuICBsZXQgZWxlbWVudDtcbiAgbGV0IGRvRmluZCA9IGFzeW5jICgpID0+IHtcbiAgICBlbGVtZW50ID0gYXdhaXQgdGhpcy5leGVjdXRlQXRvbShgZmluZF9lbGVtZW50JHttYW55ID8gJ3MnIDogJyd9YCwgW3N0cmF0ZWd5LCBzZWxlY3RvciwgY29udGV4dEVsZW1lbnRdKTtcbiAgICByZXR1cm4gIV8uaXNOdWxsKGVsZW1lbnQpO1xuICB9O1xuICB0cnkge1xuICAgIGF3YWl0IHRoaXMuaW1wbGljaXRXYWl0Rm9yQ29uZGl0aW9uKGRvRmluZCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGlmIChlcnIubWVzc2FnZSAmJiBfLmlzRnVuY3Rpb24oZXJyLm1lc3NhZ2UubWF0Y2gpICYmIGVyci5tZXNzYWdlLm1hdGNoKC9Db25kaXRpb24gdW5tZXQvKSkge1xuICAgICAgLy8gY29uZGl0aW9uIHdhcyBub3QgbWV0IHNldHRpbmcgcmVzIHRvIGVtcHR5IGFycmF5XG4gICAgICBlbGVtZW50ID0gW107XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gIH1cblxuICBpZiAobWFueSkge1xuICAgIHJldHVybiB0aGlzLmNhY2hlV2ViRWxlbWVudHMoZWxlbWVudCk7XG4gIH1cbiAgaWYgKF8uaXNFbXB0eShlbGVtZW50KSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuTm9TdWNoRWxlbWVudEVycm9yKCk7XG4gIH1cbiAgcmV0dXJuIHRoaXMuY2FjaGVXZWJFbGVtZW50cyhlbGVtZW50KTtcbn07XG5cbmV4dGVuc2lvbnMuY2xpY2tXZWJDb29yZHMgPSBhc3luYyBmdW5jdGlvbiBjbGlja1dlYkNvb3JkcyAoKSB7XG4gIGxldCBjb29yZHMgPSBhd2FpdCB0aGlzLnRyYW5zbGF0ZVdlYkNvb3Jkcyh0aGlzLmN1cldlYkNvb3Jkcyk7XG4gIGF3YWl0IHRoaXMuY2xpY2tDb29yZHMoY29vcmRzKTtcbn07XG5cbmhlbHBlcnMuZXhlY3V0ZUF0b20gPSBhc3luYyBmdW5jdGlvbiBleGVjdXRlQXRvbSAoYXRvbSwgYXJncywgYWx3YXlzRGVmYXVsdEZyYW1lID0gZmFsc2UpIHtcbiAgbGV0IGZyYW1lcyA9IGFsd2F5c0RlZmF1bHRGcmFtZSA9PT0gdHJ1ZSA/IFtdIDogdGhpcy5jdXJXZWJGcmFtZXM7XG4gIGxldCBwcm9taXNlID0gdGhpcy5yZW1vdGUuZXhlY3V0ZUF0b20oYXRvbSwgYXJncywgZnJhbWVzKTtcbiAgcmV0dXJuIGF3YWl0IHRoaXMud2FpdEZvckF0b20ocHJvbWlzZSk7XG59O1xuXG5oZWxwZXJzLmV4ZWN1dGVBdG9tQXN5bmMgPSBhc3luYyBmdW5jdGlvbiBleGVjdXRlQXRvbUFzeW5jIChhdG9tLCBhcmdzLCByZXNwb25zZVVybCkge1xuICAvLyBzYXZlIHRoZSByZXNvbHZlIGFuZCByZWplY3QgbWV0aG9kcyBvZiB0aGUgcHJvbWlzZSB0byBiZSB3YWl0ZWQgZm9yXG4gIGxldCBwcm9taXNlID0gbmV3IEIoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHRoaXMuYXN5bmNQcm9taXNlID0ge3Jlc29sdmUsIHJlamVjdH07XG4gIH0pO1xuICBhd2FpdCB0aGlzLnJlbW90ZS5leGVjdXRlQXRvbUFzeW5jKGF0b20sIGFyZ3MsIHRoaXMuY3VyV2ViRnJhbWVzLCByZXNwb25zZVVybCk7XG4gIHJldHVybiBhd2FpdCB0aGlzLndhaXRGb3JBdG9tKHByb21pc2UpO1xufTtcblxuaGVscGVycy5nZXRBdG9tc0VsZW1lbnQgPSBmdW5jdGlvbiBnZXRBdG9tc0VsZW1lbnQgKGVsT3JJZCkge1xuICBjb25zdCBlbElkID0gdXRpbC51bndyYXBFbGVtZW50KGVsT3JJZCk7XG4gIGlmICghdGhpcy53ZWJFbGVtZW50c0NhY2hlLmhhcyhlbElkKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuU3RhbGVFbGVtZW50UmVmZXJlbmNlRXJyb3IoKTtcbiAgfVxuICByZXR1cm4ge0VMRU1FTlQ6IHRoaXMud2ViRWxlbWVudHNDYWNoZS5nZXQoZWxJZCl9O1xufTtcblxuaGVscGVycy5jb252ZXJ0RWxlbWVudHNGb3JBdG9tcyA9IGZ1bmN0aW9uIGNvbnZlcnRFbGVtZW50c0ZvckF0b21zIChhcmdzID0gW10pIHtcbiAgcmV0dXJuIGFyZ3MubWFwKChhcmcpID0+IHtcbiAgICBpZiAoaGVscGVycy5oYXNFbGVtZW50SWQoYXJnKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXRvbXNFbGVtZW50KGFyZyk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKCFpc0Vycm9yVHlwZShlcnIsIGVycm9ycy5TdGFsZUVsZW1lbnRSZWZlcmVuY2VFcnJvcikpIHtcbiAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBhcmc7XG4gICAgfVxuICAgIHJldHVybiBfLmlzQXJyYXkoYXJnKSA/IHRoaXMuY29udmVydEVsZW1lbnRzRm9yQXRvbXMoYXJnKSA6IGFyZztcbiAgfSk7XG59O1xuXG5oZWxwZXJzLmdldEVsZW1lbnRJZCA9IGZ1bmN0aW9uIGdldEVsZW1lbnRJZCAoZWxlbWVudCkge1xuICByZXR1cm4gZWxlbWVudC5FTEVNRU5UIHx8IGVsZW1lbnRbVzNDX1dFQl9FTEVNRU5UX0lERU5USUZJRVJdO1xufTtcblxuaGVscGVycy5oYXNFbGVtZW50SWQgPSBmdW5jdGlvbiBoYXNFbGVtZW50SWQgKGVsZW1lbnQpIHtcbiAgcmV0dXJuIHV0aWwuaGFzVmFsdWUoZWxlbWVudCkgJiYgKHV0aWwuaGFzVmFsdWUoZWxlbWVudC5FTEVNRU5UKSB8fCB1dGlsLmhhc1ZhbHVlKGVsZW1lbnRbVzNDX1dFQl9FTEVNRU5UX0lERU5USUZJRVJdKSk7XG59O1xuXG5leHRlbnNpb25zLmdldFNhZmFyaUlzSXBob25lID0gXy5tZW1vaXplKGFzeW5jIGZ1bmN0aW9uIGdldFNhZmFyaUlzSXBob25lICgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyQWdlbnQgPSBhd2FpdCB0aGlzLmV4ZWN1dGUoJ3JldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Jyk7XG4gICAgcmV0dXJuIHVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdpcGhvbmUnKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbG9nLndhcm4oYFVuYWJsZSB0byBmaW5kIGRldmljZSB0eXBlIGZyb20gdXNlcmFnZW50LiBBc3N1bWluZyBpUGhvbmVgKTtcbiAgICBsb2cuZGVidWcoYEVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xuICB9XG4gIHJldHVybiB0cnVlO1xufSk7XG5cbmV4dGVuc2lvbnMuZ2V0U2FmYXJpRGV2aWNlU2l6ZSA9IF8ubWVtb2l6ZShhc3luYyBmdW5jdGlvbiBnZXRTYWZhcmlEZXZpY2VTaXplICgpIHtcbiAgY29uc3Qgc2NyaXB0ID0gJ3JldHVybiB7aGVpZ2h0OiB3aW5kb3cuc2NyZWVuLmF2YWlsSGVpZ2h0ICogd2luZG93LmRldmljZVBpeGVsUmF0aW8sIHdpZHRoOiB3aW5kb3cuc2NyZWVuLmF2YWlsV2lkdGggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb307JztcbiAgY29uc3Qge3dpZHRoLCBoZWlnaHR9ID0gYXdhaXQgdGhpcy5leGVjdXRlKHNjcmlwdCk7XG4gIGNvbnN0IFtub3JtSGVpZ2h0LCBub3JtV2lkdGhdID0gaGVpZ2h0ID4gd2lkdGggPyBbaGVpZ2h0LCB3aWR0aF0gOiBbd2lkdGgsIGhlaWdodF07XG4gIHJldHVybiB7XG4gICAgd2lkdGg6IG5vcm1XaWR0aCxcbiAgICBoZWlnaHQ6IG5vcm1IZWlnaHQsXG4gIH07XG59KTtcblxuZXh0ZW5zaW9ucy5nZXRTYWZhcmlJc05vdGNoZWQgPSBfLm1lbW9pemUoYXN5bmMgZnVuY3Rpb24gZ2V0U2FmYXJpSXNOb3RjaGVkICgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7d2lkdGgsIGhlaWdodH0gPSBhd2FpdCB0aGlzLmdldFNhZmFyaURldmljZVNpemUoKTtcbiAgICBmb3IgKGNvbnN0IGRldmljZSBvZiBOT1RDSEVEX0RFVklDRV9TSVpFUykge1xuICAgICAgaWYgKGRldmljZS53ID09PSB3aWR0aCAmJiBkZXZpY2UuaCA9PT0gaGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbG9nLndhcm4oYFVuYWJsZSB0byBmaW5kIGRldmljZSB0eXBlIGZyb20gZGltZW5zaW9ucy4gQXNzdW1pbmcgdGhlIGRldmljZSBpcyBub3Qgbm90Y2hlZGApO1xuICAgIGxvZy5kZWJ1ZyhgRXJyb3I6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufSk7XG5cbmV4dGVuc2lvbnMuZ2V0RXh0cmFUcmFuc2xhdGVXZWJDb29yZHNPZmZzZXQgPSBhc3luYyBmdW5jdGlvbiBnZXRFeHRyYVRyYW5zbGF0ZVdlYkNvb3Jkc09mZnNldCAod3ZQb3MsIHJlYWxEaW1zKSB7XG4gIGxldCB0b3BPZmZzZXQgPSAwO1xuICBsZXQgYm90dG9tT2Zmc2V0ID0gMDtcblxuICBjb25zdCBpc0lwaG9uZSA9IGF3YWl0IHRoaXMuZ2V0U2FmYXJpSXNJcGhvbmUoKTtcblxuICAvLyBObyBuZWVkIHRvIGNoZWNrIHdoZXRoZXIgdGhlIFNtYXJ0IEFwcCBCYW5uZXIgb3IgVGFiIEJhciBpcyB2aXNpYmxlIG9yIG5vdFxuICAvLyBpZiBhbHJlYWR5IGRlZmluZWQgYnkgbmF0aXZlV2ViVGFwVGFiQmFyVmlzaWJpbGl0eSBvciBuYXRpdmVXZWJUYXBTbWFydEFwcEJhbm5lclZpc2liaWxpdHkgaW4gc2V0dGluZ3MuXG4gIGNvbnN0IHtcbiAgICBuYXRpdmVXZWJUYXBUYWJCYXJWaXNpYmlsaXR5LFxuICAgIG5hdGl2ZVdlYlRhcFNtYXJ0QXBwQmFubmVyVmlzaWJpbGl0eSxcbiAgICBzYWZhcmlUYWJCYXJQb3NpdGlvbiA9IHV0aWwuY29tcGFyZVZlcnNpb25zKHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24sICc+PScsICcxNS4wJykgJiYgaXNJcGhvbmVcbiAgICAgID8gVEFCX0JBUl9QT1NJVElPTl9CT1RUT00gOiBUQUJfQkFSX1BPU0lUSU9OX1RPUCxcbiAgfSA9IGF3YWl0IHRoaXMuc2V0dGluZ3MuZ2V0U2V0dGluZ3MoKTtcbiAgbGV0IHRhYkJhclZpc2liaWxpdHkgPSBfLmxvd2VyQ2FzZShuYXRpdmVXZWJUYXBUYWJCYXJWaXNpYmlsaXR5KTtcbiAgbGV0IGJhbm5lclZpc2liaWxpdHkgPSBfLmxvd2VyQ2FzZShuYXRpdmVXZWJUYXBTbWFydEFwcEJhbm5lclZpc2liaWxpdHkpO1xuICBjb25zdCB0YWJCYXJQb3NpdGlvbiA9IF8ubG93ZXJDYXNlKHNhZmFyaVRhYkJhclBvc2l0aW9uKTtcblxuICBpZiAoIVZJU0lCSUxJVElFUy5pbmNsdWRlcyh0YWJCYXJWaXNpYmlsaXR5KSkge1xuICAgIHRhYkJhclZpc2liaWxpdHkgPSBERVRFQ1Q7XG4gIH1cbiAgaWYgKCFWSVNJQklMSVRJRVMuaW5jbHVkZXMoYmFubmVyVmlzaWJpbGl0eSkpIHtcbiAgICBiYW5uZXJWaXNpYmlsaXR5ID0gREVURUNUO1xuICB9XG5cbiAgaWYgKCFUQUJfQkFSX1BPU1NJVElPTlMuaW5jbHVkZXModGFiQmFyUG9zaXRpb24pKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgIGAke3NhZmFyaVRhYkJhclBvc2l0aW9ufSBpcyBpbnZhbGlkIGFzIFNhZmFyaSB0YWIgYmFyIHBvc2l0aW9uLiBBdmFpbGFibGUgcG9zaXRpb25zIGFyZSAke1RBQl9CQVJfUE9TU0lUSU9OU30uYCk7XG4gIH1cblxuICBjb25zdCBpc05vdGNoZWQgPSBpc0lwaG9uZSAmJiBhd2FpdCB0aGlzLmdldFNhZmFyaUlzTm90Y2hlZCgpO1xuXG4gIGNvbnN0IG9yaWVudGF0aW9uID0gcmVhbERpbXMuaCA+IHJlYWxEaW1zLncgPyAnUE9SVFJBSVQnIDogJ0xBTkRTQ0FQRSc7XG5cbiAgY29uc3Qgbm90Y2hPZmZzZXQgPSBpc05vdGNoZWRcbiAgICA/IHV0aWwuY29tcGFyZVZlcnNpb25zKHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24sICc9JywgJzEzLjAnKVxuICAgICAgPyBJUEhPTkVfWF9OT1RDSF9PRkZTRVRfSU9TXzEzXG4gICAgICA6IElQSE9ORV9YX05PVENIX09GRlNFVF9JT1NcbiAgICA6IDA7XG5cbiAgY29uc3QgaXNTY3JvbGxlZCA9IGF3YWl0IHRoaXMuZXhlY3V0ZSgncmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPiAwJyk7XG4gIGlmIChpc1Njcm9sbGVkKSB7XG4gICAgdG9wT2Zmc2V0ID0gSVBIT05FX1NDUk9MTEVEX1RPUF9CQVJfSEVJR0hUICsgbm90Y2hPZmZzZXQ7XG5cbiAgICBpZiAoaXNOb3RjaGVkKSB7XG4gICAgICB0b3BPZmZzZXQgLT0gSVBIT05FX1hfU0NST0xMRURfT0ZGU0VUO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBpUGhvbmUgaXMgbGFuZHNjYXBlIHRoZW4gdGhlcmUgaXMgbm8gdG9wIGJhclxuICAgIGlmIChvcmllbnRhdGlvbiA9PT0gJ0xBTkRTQ0FQRScgJiYgaXNJcGhvbmUpIHtcbiAgICAgIHRvcE9mZnNldCA9IDA7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRvcE9mZnNldCA9IHRhYkJhclBvc2l0aW9uID09PSBUQUJfQkFSX1BPU0lUSU9OX0JPVFRPTSA/IDAgOiBJUEhPTkVfVE9QX0JBUl9IRUlHSFQ7XG4gICAgdG9wT2Zmc2V0ICs9IG5vdGNoT2Zmc2V0O1xuICAgIGxvZy5kZWJ1ZyhgdGFiQmFyUG9zaXRpb24gYW5kIHRvcE9mZnNldDogJHt0YWJCYXJQb3NpdGlvbn0sICR7dG9wT2Zmc2V0fWApO1xuXG4gICAgaWYgKGlzSXBob25lKSB7XG4gICAgICBpZiAob3JpZW50YXRpb24gPT09ICdQT1JUUkFJVCcpIHtcbiAgICAgICAgLy8gVGhlIGJvdHRvbSBiYXIgaXMgb25seSB2aXNpYmxlIHdoZW4gcG9ydHJhaXRcbiAgICAgICAgYm90dG9tT2Zmc2V0ID0gSVBIT05FX0JPVFRPTV9CQVJfT0ZGU0VUO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9wT2Zmc2V0ID0gSVBIT05FX0xBTkRTQ0FQRV9UT1BfQkFSX0hFSUdIVDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob3JpZW50YXRpb24gPT09ICdMQU5EU0NBUEUnIHx8ICFpc0lwaG9uZSkge1xuICAgICAgaWYgKHRhYkJhclZpc2liaWxpdHkgPT09IFZJU0lCTEUpIHtcbiAgICAgICAgdG9wT2Zmc2V0ICs9IFRBQl9CQVJfT0ZGU0VUO1xuICAgICAgfSBlbHNlIGlmICh0YWJCYXJWaXNpYmlsaXR5ID09PSBERVRFQ1QpIHtcbiAgICAgICAgLy8gVGFicyBvbmx5IGFwcGVhciBpZiB0aGUgZGV2aWNlIGlzIGxhbmRzY2FwZSBvciBpZiBpdCdzIGFuIGlQYWQgc28gd2Ugb25seSBjaGVjayB2aXNpYmlsaXR5IGluIHRoaXMgY2FzZVxuICAgICAgICAvLyBBc3N1bWUgdGhhdCBlYWNoIHRhYiBiYXIgaXMgYSBXZWJWaWV3XG4gICAgICAgIGNvbnN0IGNvbnRleHRzQW5kVmlld3MgPSBhd2FpdCB0aGlzLmdldENvbnRleHRzQW5kVmlld3MoKTtcbiAgICAgICAgY29uc3QgdGFicyA9IGNvbnRleHRzQW5kVmlld3MuZmlsdGVyKChjdHgpID0+IGN0eC5pZC5zdGFydHNXaXRoKCdXRUJWSUVXXycpKTtcblxuICAgICAgICBpZiAodGFicy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgbG9nLmRlYnVnKGBGb3VuZCAke3RhYnMubGVuZ3RofSB0YWJzLiBBc3N1bWluZyB0aGUgdGFiIGJhciBpcyB2aXNpYmxlYCk7XG4gICAgICAgICAgdG9wT2Zmc2V0ICs9IFRBQl9CQVJfT0ZGU0VUO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdG9wT2Zmc2V0ICs9IGF3YWl0IHRoaXMuZ2V0RXh0cmFOYXRpdmVXZWJUYXBPZmZzZXQoaXNJcGhvbmUsIGJhbm5lclZpc2liaWxpdHkpO1xuXG4gIHd2UG9zLnkgKz0gdG9wT2Zmc2V0O1xuICByZWFsRGltcy5oIC09ICh0b3BPZmZzZXQgKyBib3R0b21PZmZzZXQpO1xufTtcblxuZXh0ZW5zaW9ucy5nZXRFeHRyYU5hdGl2ZVdlYlRhcE9mZnNldCA9IGFzeW5jIGZ1bmN0aW9uIGdldEV4dHJhTmF0aXZlV2ViVGFwT2Zmc2V0IChpc0lwaG9uZSwgYmFubmVyVmlzaWJpbGl0eSkge1xuICBsZXQgb2Zmc2V0ID0gMDtcblxuICBpZiAoYmFubmVyVmlzaWJpbGl0eSA9PT0gVklTSUJMRSkge1xuICAgIG9mZnNldCArPSBpc0lwaG9uZSA/XG4gICAgICBJUEhPTkVfV0VCX0NPT1JEX1NNQVJUX0FQUF9CQU5ORVJfT0ZGU0VUIDpcbiAgICAgIElQQURfV0VCX0NPT1JEX1NNQVJUX0FQUF9CQU5ORVJfT0ZGU0VUO1xuICB9IGVsc2UgaWYgKGJhbm5lclZpc2liaWxpdHkgPT09IERFVEVDVCkge1xuICAgIC8vIHRyeSB0byBzZWUgaWYgdGhlcmUgaXMgYW4gU21hcnQgQXBwIEJhbm5lclxuICAgIGNvbnN0IGJhbm5lcnMgPSBhd2FpdCB0aGlzLmZpbmROYXRpdmVFbGVtZW50T3JFbGVtZW50cygnYWNjZXNzaWJpbGl0eSBpZCcsICdDbG9zZSBhcHAgZG93bmxvYWQgb2ZmZXInLCB0cnVlKTtcbiAgICBpZiAoYmFubmVycy5sZW5ndGggPiAwKSB7XG4gICAgICBvZmZzZXQgKz0gaXNJcGhvbmUgP1xuICAgICAgICBJUEhPTkVfV0VCX0NPT1JEX1NNQVJUX0FQUF9CQU5ORVJfT0ZGU0VUIDpcbiAgICAgICAgSVBBRF9XRUJfQ09PUkRfU01BUlRfQVBQX0JBTk5FUl9PRkZTRVQ7XG4gICAgfVxuICB9XG5cbiAgbG9nLmRlYnVnKGBBZGRpdGlvbmFsIG5hdGl2ZSB3ZWIgdGFwIG9mZnNldCBjb21wdXRlZDogJHtvZmZzZXR9YCk7XG4gIHJldHVybiBvZmZzZXQ7XG59O1xuXG5hc3luYyBmdW5jdGlvbiB0YXBXZWJFbGVtZW50TmF0aXZlbHkgKGRyaXZlciwgYXRvbXNFbGVtZW50KSB7XG4gIC8vIHRyeSB0byBnZXQgdGhlIHRleHQgb2YgdGhlIGVsZW1lbnQsIHdoaWNoIHdpbGwgYmUgYWNjZXNzaWJsZSBpbiB0aGVcbiAgLy8gbmF0aXZlIGNvbnRleHRcbiAgdHJ5IHtcbiAgICBsZXQgdGV4dCA9IGF3YWl0IGRyaXZlci5leGVjdXRlQXRvbSgnZ2V0X3RleHQnLCBbYXRvbXNFbGVtZW50XSk7XG4gICAgaWYgKCF0ZXh0KSB7XG4gICAgICB0ZXh0ID0gYXdhaXQgZHJpdmVyLmV4ZWN1dGVBdG9tKCdnZXRfYXR0cmlidXRlX3ZhbHVlJywgW2F0b21zRWxlbWVudCwgJ3ZhbHVlJ10pO1xuICAgIH1cblxuICAgIGlmICh0ZXh0KSB7XG4gICAgICBjb25zdCBlbHMgPSBhd2FpdCBkcml2ZXIuZmluZE5hdGl2ZUVsZW1lbnRPckVsZW1lbnRzKCdhY2Nlc3NpYmlsaXR5IGlkJywgdGV4dCwgdHJ1ZSk7XG4gICAgICBpZiAoZWxzLmxlbmd0aCA9PT0gMSB8fCBlbHMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIGNvbnN0IGVsID0gZWxzWzBdO1xuICAgICAgICAvLyB1c2UgdGFwIGJlY2F1c2Ugb24gaU9TIDExLjIgYW5kIGJlbG93IGBuYXRpdmVDbGlja2AgY3Jhc2hlcyBXREFcbiAgICAgICAgY29uc3QgcmVjdCA9IGF3YWl0IGRyaXZlci5wcm94eUNvbW1hbmQoYC9lbGVtZW50LyR7dXRpbC51bndyYXBFbGVtZW50KGVsKX0vcmVjdGAsICdHRVQnKTtcbiAgICAgICAgaWYgKGVscy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICBjb25zdCBlbDIgPSBlbHNbMV07XG4gICAgICAgICAgY29uc3QgcmVjdDIgPSBhd2FpdCBkcml2ZXIucHJveHlDb21tYW5kKGAvZWxlbWVudC8ke3V0aWwudW53cmFwRWxlbWVudChlbDIpfS9yZWN0YCwgJ0dFVCcpO1xuXG4gICAgICAgICAgaWYgKChyZWN0LnggIT09IHJlY3QyLnggfHwgcmVjdC55ICE9PSByZWN0Mi55KSB8fFxuICAgICAgICAgIChyZWN0LndpZHRoICE9PSByZWN0Mi53aWR0aCB8fCByZWN0LmhlaWdodCAhPT0gcmVjdDIuaGVpZ2h0KSkge1xuICAgICAgICAgICAgLy8gVGhlc2UgMiBuYXRpdmUgZWxlbWVudHMgYXJlIG5vdCByZWZlcnJpbmcgdG8gdGhlIHNhbWUgd2ViIGVsZW1lbnRcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29vcmRzID0ge1xuICAgICAgICAgIHg6IE1hdGgucm91bmQocmVjdC54ICsgcmVjdC53aWR0aCAvIDIpLFxuICAgICAgICAgIHk6IE1hdGgucm91bmQocmVjdC55ICsgcmVjdC5oZWlnaHQgLyAyKSxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgZHJpdmVyLmNsaWNrQ29vcmRzKGNvb3Jkcyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gYW55IGZhaWx1cmUgc2hvdWxkIGZhbGwgdGhyb3VnaCBhbmQgdHJpZ2dlciB0aGUgbW9yZSBlbGFib3JhdGVcbiAgICAvLyBtZXRob2Qgb2YgY2xpY2tpbmdcbiAgICBsb2cud2FybihgRXJyb3IgYXR0ZW1wdGluZyB0byBjbGljazogJHtlcnIubWVzc2FnZX1gKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmV4dGVuc2lvbnMubmF0aXZlV2ViVGFwID0gYXN5bmMgZnVuY3Rpb24gbmF0aXZlV2ViVGFwIChlbCkge1xuICBjb25zdCBhdG9tc0VsZW1lbnQgPSB0aGlzLmdldEF0b21zRWxlbWVudChlbCk7XG5cbiAgLy8gaWYgc3RyaWN0IG5hdGl2ZSB0YXAsIGRvIG5vdCB0cnkgdG8gZG8gaXQgd2l0aCBXREEgZGlyZWN0bHlcbiAgaWYgKCEoYXdhaXQgdGhpcy5zZXR0aW5ncy5nZXRTZXR0aW5ncygpKS5uYXRpdmVXZWJUYXBTdHJpY3QgJiYgYXdhaXQgdGFwV2ViRWxlbWVudE5hdGl2ZWx5KHRoaXMsIGF0b21zRWxlbWVudCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgbG9nLndhcm4oJ1VuYWJsZSB0byBkbyBzaW1wbGUgbmF0aXZlIHdlYiB0YXAuIEF0dGVtcHRpbmcgdG8gY29udmVydCBjb29yZGluYXRlcycpO1xuXG4gIC8vIGBnZXRfdG9wX2xlZnRfY29vcmRpbmF0ZXNgIHJldHVybnMgdGhlIHdyb25nIHZhbHVlIHNvbWV0aW1lcyxcbiAgLy8gdW5sZXNzIHdlIHByZS1jYWxsIGJvdGggb2YgdGhlc2UgZnVuY3Rpb25zIGJlZm9yZSB0aGUgYWN0dWFsIGNhbGxzXG4gIGF3YWl0IEIuUHJvbWlzZS5hbGwoW1xuICAgIHRoaXMuZXhlY3V0ZUF0b20oJ2dldF9zaXplJywgW2F0b21zRWxlbWVudF0pLFxuICAgIHRoaXMuZXhlY3V0ZUF0b20oJ2dldF90b3BfbGVmdF9jb29yZGluYXRlcycsIFthdG9tc0VsZW1lbnRdKSxcbiAgXSk7XG5cbiAgY29uc3QgW3NpemUsIGNvb3JkaW5hdGVzXSA9IGF3YWl0IEIuUHJvbWlzZS5hbGwoW1xuICAgIHRoaXMuZXhlY3V0ZUF0b20oJ2dldF9zaXplJywgW2F0b21zRWxlbWVudF0pLFxuICAgIHRoaXMuZXhlY3V0ZUF0b20oJ2dldF90b3BfbGVmdF9jb29yZGluYXRlcycsIFthdG9tc0VsZW1lbnRdKSxcbiAgXSk7XG4gIGNvbnN0IHt3aWR0aCwgaGVpZ2h0fSA9IHNpemU7XG4gIGxldCB7eCwgeX0gPSBjb29yZGluYXRlcztcbiAgeCArPSB3aWR0aCAvIDI7XG4gIHkgKz0gaGVpZ2h0IC8gMjtcblxuICB0aGlzLmN1cldlYkNvb3JkcyA9IHt4LCB5fTtcbiAgYXdhaXQgdGhpcy5jbGlja1dlYkNvb3JkcygpO1xufTtcblxuZXh0ZW5zaW9ucy5jbGlja0Nvb3JkcyA9IGFzeW5jIGZ1bmN0aW9uIGNsaWNrQ29vcmRzIChjb29yZHMpIHtcbiAgYXdhaXQgdGhpcy5wZXJmb3JtVG91Y2goW1xuICAgIHtcbiAgICAgIGFjdGlvbjogJ3RhcCcsXG4gICAgICBvcHRpb25zOiBjb29yZHMsXG4gICAgfSxcbiAgXSk7XG59O1xuXG5leHRlbnNpb25zLnRyYW5zbGF0ZVdlYkNvb3JkcyA9IGFzeW5jIGZ1bmN0aW9uIHRyYW5zbGF0ZVdlYkNvb3JkcyAoY29vcmRzKSB7XG4gIGxvZy5kZWJ1ZyhgVHJhbnNsYXRpbmcgY29vcmRpbmF0ZXMgKCR7SlNPTi5zdHJpbmdpZnkoY29vcmRzKX0pIHRvIHdlYiBjb29yZGluYXRlc2ApO1xuXG4gIC8vIGFic29sdXRpemUgd2ViIGNvb3Jkc1xuICBsZXQgd2VidmlldztcbiAgdHJ5IHtcbiAgICB3ZWJ2aWV3ID0gYXdhaXQgcmV0cnlJbnRlcnZhbCg1LCAxMDAsIGFzeW5jICgpID0+IGF3YWl0IHRoaXMuZmluZE5hdGl2ZUVsZW1lbnRPckVsZW1lbnRzKCdjbGFzcyBuYW1lJywgJ1hDVUlFbGVtZW50VHlwZVdlYlZpZXcnLCBmYWxzZSkpO1xuICB9IGNhdGNoIChpZ24pIHt9XG5cbiAgaWYgKCF3ZWJ2aWV3KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBObyBXZWJWaWV3IGZvdW5kLiBVbmFibGUgdG8gdHJhbnNsYXRlIHdlYiBjb29yZGluYXRlcyBmb3IgbmF0aXZlIHdlYiB0YXAuYCk7XG4gIH1cblxuICB3ZWJ2aWV3ID0gdXRpbC51bndyYXBFbGVtZW50KHdlYnZpZXcpO1xuXG4gIGNvbnN0IHJlY3QgPSBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChgL2VsZW1lbnQvJHt3ZWJ2aWV3fS9yZWN0YCwgJ0dFVCcpO1xuICBjb25zdCB3dlBvcyA9IHt4OiByZWN0LngsIHk6IHJlY3QueX07XG4gIGNvbnN0IHJlYWxEaW1zID0ge3c6IHJlY3Qud2lkdGgsIGg6IHJlY3QuaGVpZ2h0fTtcblxuICBjb25zdCBjbWQgPSAnKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHt3OiB3aW5kb3cuaW5uZXJXaWR0aCwgaDogd2luZG93LmlubmVySGVpZ2h0fTsgfSkoKSc7XG4gIGNvbnN0IHd2RGltcyA9IGF3YWl0IHRoaXMucmVtb3RlLmV4ZWN1dGUoY21kKTtcblxuICAvLyBrZWVwIHRyYWNrIG9mIGltcGxpY2l0IHdhaXQsIGFuZCBzZXQgbG9jYWxseSB0byAwXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vYXBwaXVtL2lzc3Vlcy8xNDk4OFxuICBjb25zdCBpbXBsaWNpdFdhaXRNcyA9IHRoaXMuaW1wbGljaXRXYWl0TXM7XG4gIGF3YWl0IHRoaXMuc2V0SW1wbGljaXRXYWl0KDApO1xuICB0cnkge1xuICAgIGF3YWl0IHRoaXMuZ2V0RXh0cmFUcmFuc2xhdGVXZWJDb29yZHNPZmZzZXQod3ZQb3MsIHJlYWxEaW1zKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBhd2FpdCB0aGlzLnNldEltcGxpY2l0V2FpdChpbXBsaWNpdFdhaXRNcyk7XG4gIH1cblxuICBpZiAod3ZEaW1zICYmIHJlYWxEaW1zICYmIHd2UG9zKSB7XG4gICAgbGV0IHhSYXRpbyA9IHJlYWxEaW1zLncgLyB3dkRpbXMudztcbiAgICBsZXQgeVJhdGlvID0gcmVhbERpbXMuaCAvIHd2RGltcy5oO1xuICAgIGxldCBuZXdDb29yZHMgPSB7XG4gICAgICB4OiB3dlBvcy54ICsgTWF0aC5yb3VuZCh4UmF0aW8gKiBjb29yZHMueCksXG4gICAgICB5OiB3dlBvcy55ICsgTWF0aC5yb3VuZCh5UmF0aW8gKiBjb29yZHMueSksXG4gICAgfTtcblxuICAgIC8vIGFkZGl0aW9uYWwgbG9nZ2luZyBmb3IgY29vcmRpbmF0ZXMsIHNpbmNlIGl0IGlzIHNvbWV0aW1lcyBicm9rZW5cbiAgICAvLyAgIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYXBwaXVtL2FwcGl1bS9pc3N1ZXMvOTE1OVxuICAgIGxvZy5kZWJ1ZyhgQ29udmVydGVkIGNvb3JkaW5hdGVzOiAke0pTT04uc3RyaW5naWZ5KG5ld0Nvb3Jkcyl9YCk7XG4gICAgbG9nLmRlYnVnKGAgICAgcmVjdDogJHtKU09OLnN0cmluZ2lmeShyZWN0KX1gKTtcbiAgICBsb2cuZGVidWcoYCAgICB3dlBvczogJHtKU09OLnN0cmluZ2lmeSh3dlBvcyl9YCk7XG4gICAgbG9nLmRlYnVnKGAgICAgcmVhbERpbXM6ICR7SlNPTi5zdHJpbmdpZnkocmVhbERpbXMpfWApO1xuICAgIGxvZy5kZWJ1ZyhgICAgIHd2RGltczogJHtKU09OLnN0cmluZ2lmeSh3dkRpbXMpfWApO1xuICAgIGxvZy5kZWJ1ZyhgICAgIHhSYXRpbzogJHtKU09OLnN0cmluZ2lmeSh4UmF0aW8pfWApO1xuICAgIGxvZy5kZWJ1ZyhgICAgIHlSYXRpbzogJHtKU09OLnN0cmluZ2lmeSh5UmF0aW8pfWApO1xuXG4gICAgbG9nLmRlYnVnKGBDb252ZXJ0ZWQgd2ViIGNvb3JkcyAke0pTT04uc3RyaW5naWZ5KGNvb3Jkcyl9IGAgK1xuICAgICAgICAgICAgICBgaW50byByZWFsIGNvb3JkcyAke0pTT04uc3RyaW5naWZ5KG5ld0Nvb3Jkcyl9YCk7XG4gICAgcmV0dXJuIG5ld0Nvb3JkcztcbiAgfVxufTtcblxuZXh0ZW5zaW9ucy5jaGVja0ZvckFsZXJ0ID0gYXN5bmMgZnVuY3Rpb24gY2hlY2tGb3JBbGVydCAoKSB7XG4gIHJldHVybiBfLmlzU3RyaW5nKGF3YWl0IHRoaXMuZ2V0QWxlcnRUZXh0KCkpO1xufTtcblxuZXh0ZW5zaW9ucy53YWl0Rm9yQXRvbSA9IGFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JBdG9tIChwcm9taXNlKSB7XG4gIGNvbnN0IHRpbWVyID0gbmV3IHRpbWluZy5UaW1lcigpLnN0YXJ0KCk7XG5cbiAgLy8gbmVlZCB0byBjaGVjayBmb3IgYWxlcnQgd2hpbGUgdGhlIGF0b20gaXMgYmVpbmcgZXhlY3V0ZWQuXG4gIC8vIHNvIG5vdGlmeSBvdXJzZWx2ZXMgd2hlbiBpdCBoYXBwZW5zXG4gIGNvbnN0IHRpbWVkQXRvbVByb21pc2UgPSBCLnJlc29sdmUocHJvbWlzZSkudGltZW91dChBVE9NX1dBSVRfVElNRU9VVF9NUyk7XG4gIGNvbnN0IGhhbmRsZVByb21pc2VFcnJvciA9IGFzeW5jIChwKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBwO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc3Qgb3JpZ2luYWxFcnJvciA9IChlcnIgaW5zdGFuY2VvZiBCLkFnZ3JlZ2F0ZUVycm9yKSA/IGVyclswXSA6IGVycjtcbiAgICAgIGxvZy5kZWJ1ZyhgRXJyb3IgcmVjZWl2ZWQgd2hpbGUgZXhlY3V0aW5nIGF0b206ICR7b3JpZ2luYWxFcnJvci5tZXNzYWdlfWApO1xuICAgICAgaWYgKG9yaWdpbmFsRXJyb3IgaW5zdGFuY2VvZiBCLlRpbWVvdXRFcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpZCBub3QgZ2V0IGFueSByZXNwb25zZSBmb3IgYXRvbSBleGVjdXRpb24gYWZ0ZXIgYCArXG4gICAgICAgICAgYCR7dGltZXIuZ2V0RHVyYXRpb24oKS5hc01pbGxpU2Vjb25kcy50b0ZpeGVkKDApfW1zYCk7XG4gICAgICB9XG4gICAgICB0aHJvdyBvcmlnaW5hbEVycm9yO1xuICAgIH1cbiAgfTtcbiAgLy8gaWYgdGhlIGF0b20gcHJvbWlzZSBpcyBmdWxmaWxsZWQgd2l0aGluIEFUT01fSU5JVElBTF9XQUlUX01TXG4gIC8vIHRoZW4gd2UgZG9uJ3QgbmVlZCB0byBjaGVjayBmb3IgYW4gYWxlcnQgcHJlc2VuY2VcbiAgYXdhaXQgaGFuZGxlUHJvbWlzZUVycm9yKEIuYW55KFtCLmRlbGF5KEFUT01fSU5JVElBTF9XQUlUX01TKSwgdGltZWRBdG9tUHJvbWlzZV0pKTtcbiAgaWYgKHRpbWVkQXRvbVByb21pc2UuaXNGdWxmaWxsZWQoKSkge1xuICAgIHJldHVybiBhd2FpdCB0aW1lZEF0b21Qcm9taXNlO1xuICB9XG5cbiAgLy8gLi4ub3RoZXJ3aXNlIG1ha2Ugc3VyZSB0aGVyZSBpcyBubyB1bmV4cGVjdGVkIGFsZXJ0IGNvdmVyaW5nIHRoZSBlbGVtZW50XG4gIGlmICghXy5pc1BsYWluT2JqZWN0KHRoaXMuX3dhaXRpbmdBdG9tcykpIHtcbiAgICB0aGlzLl93YWl0aW5nQXRvbXMgPSB7XG4gICAgICBjb3VudDogMCxcbiAgICAgIGFsZXJ0Tm90aWZpZXI6IG5ldyBFdmVudEVtaXR0ZXIoKSxcbiAgICAgIGFsZXJ0TW9uaXRvcjogQi5yZXNvbHZlKCksXG4gICAgfTtcbiAgfVxuICB0aGlzLl93YWl0aW5nQXRvbXMuY291bnQrKztcblxuICBsZXQgb25BbGVydENhbGxiYWNrO1xuICB0cnkge1xuICAgIC8vIG9ubHkgcmVzdGFydCB0aGUgbW9uaXRvciBpZiBpdCBpcyBub3QgcnVubmluZyBhbHJlYWR5XG4gICAgaWYgKHRoaXMuX3dhaXRpbmdBdG9tcy5hbGVydE1vbml0b3IuaXNSZXNvbHZlZCgpKSB7XG4gICAgICB0aGlzLl93YWl0aW5nQXRvbXMuYWxlcnRNb25pdG9yID0gQi5yZXNvbHZlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIHdoaWxlICh0aGlzLl93YWl0aW5nQXRvbXMuY291bnQgPiAwKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChhd2FpdCB0aGlzLmNoZWNrRm9yQWxlcnQoKSkge1xuICAgICAgICAgICAgICB0aGlzLl93YWl0aW5nQXRvbXMuYWxlcnROb3RpZmllci5lbWl0KE9OX09CU1RSVUNUSU5HX0FMRVJUX0VWRU5UKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChpZ24pIHt9XG4gICAgICAgICAgYXdhaXQgQi5kZWxheShBVE9NX0lOSVRJQUxfV0FJVF9NUyAvIDIpO1xuICAgICAgICB9XG4gICAgICB9KSgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgbmV3IEIoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgb25BbGVydENhbGxiYWNrID0gKCkgPT4gcmVqZWN0KG5ldyBlcnJvcnMuVW5leHBlY3RlZEFsZXJ0T3BlbkVycm9yKCkpO1xuICAgICAgdGhpcy5fd2FpdGluZ0F0b21zLmFsZXJ0Tm90aWZpZXIub25jZShPTl9PQlNUUlVDVElOR19BTEVSVF9FVkVOVCwgb25BbGVydENhbGxiYWNrKTtcbiAgICAgIGhhbmRsZVByb21pc2VFcnJvcih0aW1lZEF0b21Qcm9taXNlKVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJvbWlzZS9wcmVmZXItYXdhaXQtdG8tdGhlblxuICAgICAgICAudGhlbihyZXNvbHZlKVxuICAgICAgICAuY2F0Y2gocmVqZWN0KTtcbiAgICB9KTtcbiAgfSBmaW5hbGx5IHtcbiAgICBpZiAob25BbGVydENhbGxiYWNrKSB7XG4gICAgICB0aGlzLl93YWl0aW5nQXRvbXMuYWxlcnROb3RpZmllci5yZW1vdmVMaXN0ZW5lcihPTl9PQlNUUlVDVElOR19BTEVSVF9FVkVOVCwgb25BbGVydENhbGxiYWNrKTtcbiAgICB9XG4gICAgdGhpcy5fd2FpdGluZ0F0b21zLmNvdW50LS07XG4gIH1cbn07XG5cbmV4dGVuc2lvbnMubW9iaWxlV2ViTmF2ID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlV2ViTmF2IChuYXZUeXBlKSB7XG4gIHRoaXMucmVtb3RlLmFsbG93TmF2aWdhdGlvbldpdGhvdXRSZWxvYWQgPSB0cnVlO1xuICB0cnkge1xuICAgIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2V4ZWN1dGVfc2NyaXB0JywgW2BoaXN0b3J5LiR7bmF2VHlwZX0oKTtgLCBudWxsXSk7XG4gIH0gZmluYWxseSB7XG4gICAgdGhpcy5yZW1vdGUuYWxsb3dOYXZpZ2F0aW9uV2l0aG91dFJlbG9hZCA9IGZhbHNlO1xuICB9XG59O1xuXG5PYmplY3QuYXNzaWduKGNvbW1hbmRzLCBleHRlbnNpb25zLCBoZWxwZXJzKTtcblxuZXhwb3J0IGRlZmF1bHQgY29tbWFuZHM7XG4iXSwiZmlsZSI6ImxpYi9jb21tYW5kcy93ZWIuanMiLCJzb3VyY2VSb290IjoiLi4vLi4vLi4ifQ==
